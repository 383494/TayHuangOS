# 内核细节

* *TayhuangOS*的**kernel**为**微内核**
* 进程间采用**同步IPC**与**异步IPC**并存
    * 在大部分情况下 调用*目标进程*使用**同步IPC** 返回值使用**异步IPC**
    * 在大部分情况下 调用*目标进程*会让*调用进程*将自身**剩余的时间片**捐献给被*调用进程* 但被调用进程**不是立即运行**
    * 在ipc时 长度若为0则给予的地址为*立即值*
    * ipc*立即值*大小 <= 8Byte
    * allow_pid**特殊值**如下
        * 0 NULL 无进程 不允许IPC
        * -1 ANY 允许任何进程发送
        * -2 DUMMY 此时 只有内核可以通知其醒来 但任何进程（包括内核)都可以给它发消息 通常与check_ipc配合使用
* PID**从1开始**分配
* 系统的**第一个进程**为*init*
* 系统使用**双级调度队列**
    * 0级使用**FCFS**算法
        * *FCFS(First Come First Serve 先来先服务)* 先到的进程**一直运行** 直到其**无法继续运行**为止
    * 1级使用**TRR**算法
        * *TRR(Time Round Robin 时间片轮转)* 略
        * *时间片*长度为 20ms
        * 一般情况下 进程持有*priority* \* 3个*时间片*
        * 一般情况下 进程的*priority*在\[1, 5\]之间
    * 当0级有*进程*可以调度时 **立即**调度*0级进程*