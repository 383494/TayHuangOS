# 系统调用

系统调用的中断号为0x40

其中rax为功能号

所有系统调用的功能号、功能、参数如下表所示
| 功能名         | 功能号 | 功能                                                 | 参数                                             | 返回值     |
| -------------- | ------ | ---------------------------------------------------- | ------------------------------------------------ | ---------- |
| moo            | 0x00   | 超级牛力                                             | 无                                               | 无         |
| sendmsg        | 0x01   | 发送消息(异步ipc)                                    | rsi: 消息包地址 rcx: 消息包长度 rdx: 目标进程pid | 是否成功   |
| wait_ipc       | 0x02   | 等待某一进程发消息(会先检查是否有该进程的消息再等待) | rdx: 等待的进程号 -1代表任意进程                 | 无         |
| get_read_ptr   | 0x03   | 获取读取指针                                         | 无                                               | 读取指针   |
| set_read_ptr   | 0x04   | 设置读取指针                                         | rsi: 读取指针                                    | 无         |
| get_used_size  | 0x05   | 获取已使用大小                                       | 无                                               | 已使用大小 |
| set_used_size  | 0x06   | 设置已使用大小                                       | rcx: 以使用大小                                  | 无         |
| setmail_buffer | 0x07   | 设置邮箱的buffer地址(vaddr)                          | rdi: 邮箱地址 rcx:邮箱大小                       | 无         |
| sleep          | 0x08   | 休眠                                                 | 无                                               | 无         |
| awake          | 0x09   | 唤醒特定进程                                         | rdx: 目标进程pid                                 | 无         |
| wait_irq       | 0x0A   | 等待某一irq                                          | rdx: 等待的irq号                                 | 无         |
| exit           | 0x0b   | 退出                                                 | rdx: 返回值                                      | 无         |